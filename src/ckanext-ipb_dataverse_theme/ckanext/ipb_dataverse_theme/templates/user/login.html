{% ckan_extends %}

{% block page_title %}Login - IPB Dataverse{% endblock %}

{% block content %}
<section class="ipb-login-section">
  <div class="container">
    <div class="ipb-login-card">

      <h1 class="ipb-login-title">LOGIN</h1>
      <p class="ipb-login-subtitle">
        Silahkan masuk menggunakan ID IPB dan kata sandi Anda
      </p>

      {# Form Login Wajib mengarah ke user.login #}
      <form class="ipb-login-form" method="post" action="{{ h.url_for('user.login') }}">
        
        {{ h.csrf_input() }}

        <div class="ipb-form-group">
          <label class="ipb-form-label" for="field-login">ID IPB / Username</label>
          <input
            id="field-login"
            type="text"
            name="login"
            value="{{ c.login or '' }}"
            class="ipb-form-input"
            placeholder="Username atau Email"
            autofocus>
        </div>

        <div class="ipb-form-group">
          <label class="ipb-form-label" for="field-password">Kata sandi</label>
          <div class="ipb-password-wrapper">
            <input
              id="field-password"
              type="password"
              name="password"
              class="ipb-form-input ipb-form-input-password"
              placeholder="Masukkan kata sandi">
            <span class="ipb-password-icon"><i class="fa fa-eye"></i></span>
          </div>
          
          <div class="ipb-login-help">
            Lupa kata sandi? <a href="{{ h.url_for('user.request_reset') }}" class="ipb-login-link">klik disini</a>
          </div>
        </div>

        {# Redirect Handler #}
        {% if c.came_from %}
          <input type="hidden" name="came_from" value="{{ c.came_from }}" />
        {% endif %}

        <button type="submit" class="ipb-login-button">Login</button>
      </form>

      <p class="ipb-login-register">
        Belum memiliki akun? <a href="{{ h.url_for('user.register') }}" class="ipb-login-link">Registrasi di sini</a>
      </p>
    </div>
  </div>
</section>

{# Script Show/Hide Password #}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var passInput = document.querySelector('.ipb-form-input-password');
    var toggleIcon = document.querySelector('.ipb-password-icon');
    if(passInput && toggleIcon){
      toggleIcon.addEventListener('click', function(){
        var type = passInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passInput.setAttribute('type', type);
      });
    }
  });
</script>
{% endblock %}

{% block footer %}{% endblock %}